#!/usr/bin/env ruby

require "asciidoctor/cli"
require "asciidoctor/rfc/v3/converter"
require "asciidoctor-bibliography"

options = Asciidoctor::Cli::Options.new backend: "rfc3", header_footer: true
# FIXME This is a really bizarre API. Please make me simpler.

exit 0 if options.parse!(ARGV) == 0

invoker = Asciidoctor::Cli::Invoker.new options
GC.start
invoker.invoke!
exit invoker.code
